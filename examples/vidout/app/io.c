#include "itm_messages.h"
#include <errno.h>
#include <sys/stat.h>

// ============================================================================================
int _close(int f) { return -EBADF; }
// ============================================================================================
void _exit(int code) {
  while (1)
    ;
}
// ============================================================================================
int _fstat(int f, struct stat *s) { return -EBADF; }
// ============================================================================================
int _getpid(void)

{
  return 1;
}
// ============================================================================================
int _lseek(int f, off_t o, int w) { return -EBADF; }
// ============================================================================================
void _kill(int p)

{}
// ============================================================================================
int _read(int f, void *b, size_t n) { return -EBADF; }
// ============================================================================================
void *_sbrk(int i) {
  extern char _Heap_Begin;
  extern char _Heap_Limit;

  static char *heapp;
  char *prevheapp;

  if (0 == heapp) {
    heapp = &_Heap_Begin;
  }

  prevheapp = heapp;
  heapp += i;

  if (heapp >= (&_Heap_Limit)) {
    errno = ENOMEM;
    return (char *)-1;
  }

  return (void *)prevheapp;
}
// ============================================================================================
int _write(int f, const void *b, size_t n) { return ITM_write(f, b, n); }
// ============================================================================================
int _isatty(int f) { return 0; }
// ============================================================================================
